<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>找寶藏遊戲 - 演算法比較</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .box-container { display: flex; flex-wrap: wrap; width: 300px; margin-bottom: 20px; }
    .box { width: 50px; height: 50px; margin: 5px; background: #eee; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1px solid #ccc; }
    .box.opened { background: #cfc; }
    button { margin-right: 10px; margin-bottom: 10px; }
  </style>
</head>
<body>

<h1>找寶藏遊戲！</h1>
<p>選擇一種搜尋方式，看看你能多快找到寶藏！</p>

<div>
  <button onclick="startGame('random')">隨機搜尋</button>
  <button onclick="startGame('linear')">線性搜尋</button>
  <button onclick="startGame('hint')">提示搜尋</button>
</div>

<div class="box-container" id="boxes"></div>

<p id="result"></p>

<script>
let treasureIndex;
let openCount = 0;
let mode = '';
let boxes = [];
let hintLow = 0;
let hintHigh = 29;

function createBoxes() {
  const container = document.getElementById('boxes');
  container.innerHTML = '';
  boxes = [];
  for (let i = 0; i < 30; i++) {
    const box = document.createElement('div');
    box.className = 'box';
    box.innerText = i + 1;
    box.addEventListener('click', () => handleClick(i));
    container.appendChild(box);
    boxes.push(box);
  }
}

function startGame(selectedMode) {
  mode = selectedMode;
  treasureIndex = Math.floor(Math.random() * 30);
  openCount = 0;
  hintLow = 0;
  hintHigh = 29;
  createBoxes();
  document.getElementById('result').innerText = '開始遊戲！寶藏藏好了～';
}

function handleClick(index) {
  if (boxes[index].classList.contains('opened')) return;
  openCount++;
  boxes[index].classList.add('opened');

  if (index === treasureIndex) {
    document.getElementById('result').innerText = `🎉 恭喜找到寶藏！你找了 ${openCount} 次！`;
  } else {
    if (mode === 'hint') {
      if (index < treasureIndex) {
        hintLow = Math.max(hintLow, index + 1);
        alert(`提示：寶藏在 ${hintLow + 1} ~ ${hintHigh + 1} 之間！`);
      } else {
        hintHigh = Math.min(hintHigh, index - 1);
        alert(`提示：寶藏在 ${hintLow + 1} ~ ${hintHigh + 1} 之間！`);
      }
    }
  }
}
</script>

</body>
</html>
