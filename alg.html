<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>æˆ‘æ˜¯AIå°å·¥ç¨‹å¸«</title>
  <style>
    body { font-family: "Microsoft JhengHei", sans-serif; padding: 20px; background: #f0f8ff; }
    h1, h2 { color: #333; }
    section { margin-bottom: 40px; }
    #chatbox { border: 1px solid #ccc; background: #fff; padding: 10px; height: 200px; overflow-y: scroll; }
    .user { color: blue; }
    .bot { color: green; }
    button, input { padding: 8px; margin-top: 10px; }
    #dbView { background: #eef; padding: 10px; border-radius: 5px; }
    .flow-step { margin: 5px 0; }
    .highlight { background: yellow; padding: 2px 4px; }
  </style>
</head>
<body>

  <h1>ğŸ¤– æˆ‘æ˜¯AIå°å·¥ç¨‹å¸«</h1>
  <p>è·Ÿæ©Ÿå™¨äººèŠå¤©ï¼Œç„¶å¾Œçœ‹çœ‹å®ƒæ˜¯æ€éº¼ã€Œæƒ³å‡ºç­”æ¡ˆã€çš„å§ï¼</p>

  <!-- ç¬¬ä¸€é—œï¼šçŒœé—œéµå­— -->
  <section>
    <h2>ğŸ” ç¬¬ä¸€é—œï¼šçŒœçŒœæ¼”ç®—æ³•åœ¨çœ‹ä»€éº¼</h2>
    <div id="chatbox"></div>
    <input type="text" id="userInput" placeholder="è¼¸å…¥ä½ çš„å•é¡Œ..." />
    <button onclick="handleChat()">é€å‡º</button>
    <div id="quizArea" style="margin-top: 15px;"></div>
  </section>

  <!-- ç¬¬äºŒé—œï¼šè§€å¯Ÿè³‡æ–™åº«èˆ‡æµç¨‹ -->
  <section>
    <h2>ğŸ§  ç¬¬äºŒé—œï¼šAIçš„å›æ‡‰è³‡æ–™åº«å’Œæ¼”ç®—æ³•</h2>
    <details>
      <summary>é»æˆ‘æŸ¥çœ‹å›æ‡‰è³‡æ–™åº«</summary>
      <div id="dbView"></div>
    </details>
    <button onclick="simulateAlgorithm()">ğŸ”„ æ¨¡æ“¬ä¸€æ¬¡æ¼”ç®—æ³•æµç¨‹</button>
    <div id="flow"></div>
  </section>

  <!-- ç¬¬ä¸‰é—œï¼šæˆ‘ä¾†ç•¶AIè¨­è¨ˆå¸« -->
  <section>
    <h2>ğŸ¨ ç¬¬ä¸‰é—œï¼šä½ ä¾†ç•¶AIè¨­è¨ˆå¸«</h2>
    <input id="newKey" placeholder="è¼¸å…¥é—œéµå­—" />
    <input id="newResp1" placeholder="å›æ‡‰1" />
    <input id="newResp2" placeholder="å›æ‡‰2" />
    <button onclick="addNewKeyword()">â• æ–°å¢</button>
  </section>

  <script>
    let database = {
      "ä½ å¥½": ["å“ˆå›‰ï¼å¾ˆé«˜èˆˆè¦‹åˆ°ä½ ï¼", "å—¨ï¼ä»Šå¤©å¿ƒæƒ…å¦‚ä½•ï¼Ÿ"],
      "å¤©æ°£": ["ä»Šå¤©å¤©æ°£ä¸éŒ¯å”·ï½", "è¨˜å¾—å¸¶å‚˜ï¼Œå¯èƒ½æœƒä¸‹é›¨ã€‚"],
      "ä½ æ˜¯èª°": ["æˆ‘æ˜¯å°å°AIèŠå¤©æ©Ÿå™¨äººï¼", "æˆ‘æ˜¯ä¸€å€‹ç°¡å–®çš„æ©Ÿå™¨äººï¼Œæ­£åœ¨å­¸ç¿’å›ç­”å•é¡Œï¼"],
      "å­¸ç¿’": ["å­¸ç¿’æ˜¯ä¸€ä»¶æœ‰è¶£çš„äº‹ï¼", "ä½ å–œæ­¡å“ªä¸€ç§‘å‘¢ï¼Ÿ"],
      "å†è¦‹": ["æ°æ°ï¼ä¸‹æ¬¡å†èŠï½", "ç¥ä½ æœ‰ç¾å¥½çš„ä¸€å¤©ï¼"]
    };

    // æ“´å±•å›æ‡‰è³‡æ–™åº«ï¼Œå¢åŠ æ›´å¤šå•å€™èª
    const greetings = [
      "ä½ å¥½", "å—¨", "Hi", "å“ˆå›‰", "å®‰å®‰", "æ—©å®‰", "å˜¿", "Hello", "Yo"
    ];

    function handleChat() {
      const input = document.getElementById("userInput").value;
      const chatbox = document.getElementById("chatbox");
      chatbox.innerHTML += `<div class="user">ä½ ï¼š${input}</div>`;

      let foundKey = null;
      for (let key in database) {
        if (greetings.some(greeting => input.toLowerCase().includes(greeting.toLowerCase())) || input.includes(key)) {
          foundKey = key;
          const reply = database[key];
          const botReply = reply[Math.floor(Math.random() * reply.length)];
          chatbox.innerHTML += `<div class="bot">æ©Ÿå™¨äººï¼š${botReply}</div>`;
          break;
        }
      }

      if (!foundKey) {
        chatbox.innerHTML += `<div class="bot">æ©Ÿå™¨äººï¼šæˆ‘é‚„è½ä¸æ‡‚é€™å¥è©±ï¼Œå¯ä»¥æ›å€‹æ–¹å¼å•æˆ‘å—ï¼Ÿ</div>`;
        document.getElementById("quizArea").innerHTML = "";
      } else {
        // é¡¯ç¤ºçŒœé—œéµå­—çš„é¸é …
        const quiz = Object.keys(database).map(k => 
          `<button onclick="checkGuess('${foundKey}', '${k}')">${k}</button>`
        ).join(" ");
        document.getElementById("quizArea").innerHTML = 
          `<p>ğŸ§  ä½ çŒœï¼Œæ©Ÿå™¨äººæŠ“åˆ°çš„æ˜¯å“ªå€‹é—œéµå­—ï¼Ÿ</p>${quiz}`;
      }

      document.getElementById("userInput").value = "";
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function checkGuess(correct, guess) {
      if (correct === guess) {
        document.getElementById("quizArea").innerHTML = 
          `<p style="color: green;">âœ… æ²’éŒ¯ï¼å®ƒæ˜¯æ ¹æ“šã€Œ<strong>${correct}</strong>ã€ä¾†å›ç­”çš„ï¼</p>`;
      } else {
        document.getElementById("quizArea").innerHTML = 
          `<p style="color: red;">âŒ ä¸æ˜¯å”·ï¼Œæ­£ç¢ºæ˜¯ã€Œ<strong>${correct}</strong>ã€ï¼</p>`;
      }
    }

    function simulateAlgorithm() {
      const flow = document.getElementById("flow");
      flow.innerHTML = ` 
        <div class="flow-step">1ï¸âƒ£ ä½¿ç”¨è€…è¼¸å…¥ï¼š<span class="highlight">ä½ æ˜¯èª°</span></div>
        <div class="flow-step">2ï¸âƒ£ AI æ¯”å°æ¯å€‹é—œéµå­—ï¼šæ‰¾åˆ°ã€Œä½ æ˜¯èª°ã€âœ…</div>
        <div class="flow-step">3ï¸âƒ£ å¾è³‡æ–™åº«ä¸­é¸ä¸€å€‹å›ç­”ï¼š<strong>${database["ä½ æ˜¯èª°"][0]}</strong></div>
      `;
    }

    function addNewKeyword() {
      const key = document.getElementById("newKey").value;
      const r1 = document.getElementById("newResp1").value;
      const r2 = document.getElementById("newResp2").value;
      if (key && r1 && r2) {
        database[key] = [r1, r2];
        alert(`å·²æ–°å¢é—œéµå­—ã€Œ${key}ã€ï¼å¯ä»¥ä¾†è©¦è©¦å•å®ƒå›‰ï½`);
        showDatabase();
        document.getElementById("newKey").value = "";
        document.getElementById("newResp1").value = "";
        document.getElementById("newResp2").value = "";
      }
    }

    function showDatabase() {
      const view = Object.entries(database)
        .map(([k, v]) => `<strong>${k}</strong>ï¼š${v.join(" / ")}`)
        .join("<br>");
      document.getElementById("dbView").innerHTML = view;
    }

    showDatabase(); // åˆå§‹è¼‰å…¥è³‡æ–™åº«é¡¯ç¤º
  </script>

</body>
</html>
