<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ‰¾å¯¶è—éŠæˆ² - æ¼”ç®—æ³•æ¯”è¼ƒ</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .box-container { display: flex; flex-wrap: wrap; width: 300px; margin-bottom: 20px; }
    .box { width: 50px; height: 50px; margin: 5px; background: #eee; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1px solid #ccc; }
    .box.opened { background: #cfc; }
    button { margin-right: 10px; margin-bottom: 10px; }
  </style>
</head>
<body>

<h1>æ‰¾å¯¶è—éŠæˆ²ï¼</h1>
<p>é¸æ“‡ä¸€ç¨®æœå°‹æ–¹å¼ï¼Œçœ‹çœ‹ä½ èƒ½å¤šå¿«æ‰¾åˆ°å¯¶è—ï¼</p>

<div>
  <button onclick="startGame('random')">éš¨æ©Ÿæœå°‹</button>
  <button onclick="startGame('linear')">ç·šæ€§æœå°‹</button>
  <button onclick="startGame('hint')">æç¤ºæœå°‹</button>
</div>

<div class="box-container" id="boxes"></div>

<p id="result"></p>

<script>
let treasureIndex;
let openCount = 0;
let mode = '';
let boxes = [];
let hintLow = 0;
let hintHigh = 29;

function createBoxes() {
  const container = document.getElementById('boxes');
  container.innerHTML = '';
  boxes = [];
  for (let i = 0; i < 30; i++) {
    const box = document.createElement('div');
    box.className = 'box';
    box.innerText = i + 1;
    box.addEventListener('click', () => handleClick(i));
    container.appendChild(box);
    boxes.push(box);
  }
}

function startGame(selectedMode) {
  mode = selectedMode;
  treasureIndex = Math.floor(Math.random() * 30);
  openCount = 0;
  hintLow = 0;
  hintHigh = 29;
  createBoxes();
  document.getElementById('result').innerText = 'é–‹å§‹éŠæˆ²ï¼å¯¶è—è—å¥½äº†ï½';
}

function handleClick(index) {
  if (boxes[index].classList.contains('opened')) return;
  openCount++;
  boxes[index].classList.add('opened');

  if (index === treasureIndex) {
    document.getElementById('result').innerText = `ğŸ‰ æ­å–œæ‰¾åˆ°å¯¶è—ï¼ä½ æ‰¾äº† ${openCount} æ¬¡ï¼`;
  } else {
    if (mode === 'hint') {
      if (index < treasureIndex) {
        hintLow = Math.max(hintLow, index + 1);
        alert(`æç¤ºï¼šå¯¶è—åœ¨ ${hintLow + 1} ~ ${hintHigh + 1} ä¹‹é–“ï¼`);
      } else {
        hintHigh = Math.min(hintHigh, index - 1);
        alert(`æç¤ºï¼šå¯¶è—åœ¨ ${hintLow + 1} ~ ${hintHigh + 1} ä¹‹é–“ï¼`);
      }
    }
  }
}
</script>

</body>
</html>
